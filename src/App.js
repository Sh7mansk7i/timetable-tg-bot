import './App.css';
import { useState } from "react";
import { FaArrowLeft, FaArrowRight } from "react-icons/fa";

function App() {
    const daysOfWeek = ["Неділя", "Понеділок", "Вівторок", "Середа", "Четвер", "П’ятниця", "Субота"];
    const months = ["січня", "лютого", "березня", "квітня", "травня", "червня", "липня", "серпня", "вересня", "жовтня", "листопада", "грудня"];

    const today = new Date();
    const [date, setDate] = useState(today);

    const isLeapYear = (year) => (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;

    const calculateWeekNumber = (date) => {
        const daysInMonth = [31, isLeapYear(date.getFullYear()) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
        const dayOfYear = daysInMonth.slice(0, date.getMonth()).reduce((sum, days) => sum + days, 0) + date.getDate();
        return Math.floor(((dayOfYear - 13) / 7) % 4) + 1;
    };

    const schedule = {
        "Понеділок1": ['Фізика', 'Фізика', 'Математика', 'Математика', 'Фізкультура', 'Історія', 'Алгебра', ''],
        "Вівторок1": ['', 'Фізика', 'Фізика', 'Хімія', 'Біологія', 'Фізкультура', 'Біологія', 'Хімія'],
        "Середа1": ['Математика', 'Інформатика/Англ.мова', 'Англ.мова/Інформатика', 'Укр.мова/Інформатика', 'Англ.мова/Укр.мова', 'Англ.мова/Інформатика', 'Математика', 'Історія'],
        "Четвер1": ['Інформатика/Укр.мова', 'Укр.мова/Інформатика', 'Географія', 'Математика', 'Математика', 'Хімія', 'Укр.літ', 'Укр.літ'],
        "П’ятниця1": ['Математика', 'Біологія', 'Математика', 'Зар.літ', 'Фізика', 'Фізика', 'Виховна', ''],

        "Понеділок2": ['Фізика', 'Фізика', 'Математика', 'Математика', 'Фізкультура', 'Історія', 'Алгебра', ''],
        "Вівторок2": ['', 'Фізика', 'Фізика', 'Хімія', 'Біологія', 'Фізкультура', 'Фізика', ''],
        "Середа2": ['Математика', 'Інформатика/Англ.мова', 'Англ.мова/Інформатика', 'Укр.мова/Інформатика', 'Англ.мова/Укр.мова', 'Англ.мова/Інформатика', 'Математика', 'Історія'],
        "Четвер2": ['Інформатика/Укр.мова', 'Укр.мова/Інформатика', 'Географія', 'Математика', 'Математика', 'Хімія', 'Укр.літ', 'Укр.літ'],
        "П’ятниця2": ['Математика', 'Біологія', 'Математика', 'Зар.літ', 'Фізика', 'Фізика', 'Виховна', ''],

        "Понеділок3": ['Фізика', 'Фізика', 'Математика', 'Математика', 'Фізкультура', 'Фізика', 'Алгебра', ''],
        "Вівторок3": ['', 'Фізика', 'Фізкультура', 'Хімія', 'Біологія', 'Фізкультура', 'Історія', 'Історія'],
        "Середа3": ['Математика', 'Інформатика/Англ.мова', 'Англ.мова/Інформатика', 'Укр.мова/Інформатика', 'Англ.мова/Укр.мова', 'Англ.мова/Інформатика', 'Математика', 'Фізика'],
        "Четвер3": ['Інформатика/Укр.мова', 'Укр.мова/Інформатика', 'Географія', 'Математика', 'Математика', 'Хімія', 'Укр.літ', 'Укр.літ'],
        "П’ятниця3": ['Математика', 'Біологія', 'Математика', 'Зар.літ', 'Фізика', 'Фізика', 'Виховна', ''],

        "Понеділок4": ['Фізика', 'Фізика', 'Математика', 'Математика', 'Фізкультура', 'Історія', 'Алгебра', ''],
        "Вівторок4": ['Захист.Укр', 'Захист.Укр', 'Захист.Укр', 'Захист.Укр', 'Захист.Укр', 'Захист.Укр', 'Захист.Укр', 'Захист.Укр'],
        "Середа4": ['Математика', 'Інформатика/Англ.мова', 'Англ.мова/Інформатика', 'Укр.мова/Інформатика', 'Англ.мова/Укр.мова', 'Англ.мова/Інформатика', 'Математика', 'Історія'],
        "Четвер4": ['Інформатика/Укр.мова', 'Укр.мова/Інформатика', 'Географія', 'Математика', 'Математика', 'Хімія', 'Укр.літ', 'Укр.літ'],
        "П’ятниця4": ['Математика', 'Біологія', 'Математика', 'Зар.літ', 'Фізика', 'Фізика', 'Виховна', ''],
    };

    const getScheduleForDay = (day, weekNumber) => {
        const key = `${day}${weekNumber}`;
        return schedule[key] || ['Розклад відсутній'];
    };

    const changeDay = (offset) => {
        const newDate = new Date(date);
        newDate.setDate(date.getDate() + offset);
        setDate(newDate);
    };

    const weekNumber = calculateWeekNumber(date);
    const currentDay = daysOfWeek[date.getDay()];
    const lessons = getScheduleForDay(currentDay, weekNumber);

    return (
        <div className="app">
            <div className="top-panel">
                {date.toDateString() !== today.toDateString() && (
                    <button className="nav-button" onClick={() => changeDay(-1)}><FaArrowLeft /></button>
                )}
                <div className="date-info">
                    <span className="date-text">
                        {daysOfWeek[date.getDay()]}, {date.getDate()} {months[date.getMonth()]}
                    </span>
                    <span className="week-number">Тиждень: {weekNumber}</span>
                </div>
                <button className="nav-button" onClick={() => changeDay(1)}><FaArrowRight /></button>
            </div>
            <div className="content">
                <ul className="lesson-list">
                    {lessons.map((lesson, index) => (
                        <button key={index} className={`lesson-button ${lesson ? '' : 'empty'}`}>
                            {lesson || '---'}
                        </button>
                    ))}
                </ul>
            </div>
        </div>
    );
}

export default App;